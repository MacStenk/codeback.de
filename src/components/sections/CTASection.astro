---
// CTASection.astro - Final Call to Action
import Button from "../Button.astro";
import ChatWidget from "../ChatWidget.astro";
---

<section id="kontakt" class="border-t border-zinc-200 pt-12">
  <div
    class="bg-gradient-to-br from-green-50 to-blue-50 rounded-lg p-8 md:p-12 border border-green-200"
  >
    <!-- Live Badge -->
    <div
      class="inline-flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-full text-sm font-semibold mb-6"
    >
      <span class="w-2 h-2 bg-white rounded-full animate-pulse"></span>
      JETZT LIVE
    </div>

    <h2 class="text-3xl md:text-4xl font-bold mb-4">
      Bereit fÃ¼r AI-Sichtbarkeit?
    </h2>

    <p class="text-lg text-zinc-700 mb-6 max-w-2xl">
      CodeBack.de ist live und hat bewiesen was funktioniert: #1 in Google &
      Perplexity in 14 Tagen. Die gleiche Methodik kann auch fÃ¼r deine Website
      funktionieren.
    </p>

    <div class="grid md:grid-cols-2 gap-6 mb-8">
      <!-- Quick Win -->
      <div class="bg-white rounded-lg p-6 border border-zinc-200">
        <div class="text-2xl mb-3">âš¡</div>
        <h3 class="font-bold text-zinc-900 mb-2">Quick Check</h3>
        <p class="text-sm text-zinc-600 mb-4">
          Teste ob deine Website fÃ¼r LLMs lesbar ist. Kostenlos, in 30 Sekunden.
        </p>
        <Button
          href="/llm-checker"
          variant="primary"
          class="w-full justify-center"
        >
          Website jetzt testen
        </Button>
      </div>

      <!-- Projekt starten -->
      <div class="bg-white rounded-lg p-6 border border-zinc-200">
        <div class="text-2xl mb-3">ðŸŽ¯</div>
        <h3 class="font-bold text-zinc-900 mb-2">Projekt starten</h3>
        <p class="text-sm text-zinc-600 mb-4">
          Sprich mit unserem Briefing-Agent. Bekomme sofort Antworten und finde
          heraus ob wir zusammenpassen.
        </p>
        <button
          id="open-briefing-chat"
          class="bg-zinc-900 text-white px-6 py-3 rounded-lg w-full hover:bg-zinc-800 transition-colors"
          type="button"
        >
          Chat starten
        </button>
      </div>
    </div>

    <!-- Proof Stats -->
    <div
      class="grid grid-cols-3 gap-4 p-6 bg-white rounded-lg border border-green-200"
    >
      <div class="text-center">
        <div class="text-2xl font-bold text-green-600">14</div>
        <div class="text-xs text-zinc-600">Tage bis #1</div>
      </div>
      <div class="text-center">
        <div class="text-2xl font-bold text-green-600">2/2</div>
        <div class="text-xs text-zinc-600">Plattformen</div>
      </div>
      <div class="text-center">
        <div class="text-2xl font-bold text-green-600">100%</div>
        <div class="text-xs text-zinc-600">Reproduzierbar</div>
      </div>
    </div>

    <!-- Blog Teaser -->
    <div class="border-t border-green-200 pt-6 mt-8">
      <div class="flex items-center justify-between mb-4">
        <h3 class="font-semibold text-zinc-900">ðŸ“š Im Blog lesen</h3>
        <a href="/blog" class="text-sm text-green-600 hover:underline">
          Alle Artikel â†’
        </a>
      </div>
      <ul class="space-y-2 text-sm text-zinc-700">
        <li class="flex items-start gap-2">
          <span class="text-green-600 mt-1">â†’</span>
          <span>Answer Engine Optimization: Wie KI deine Website versteht</span>
        </li>
        <li class="flex items-start gap-2">
          <span class="text-green-600 mt-1">â†’</span>
          <span>Schema.org Deep Dive: Maschinenlesbare Strukturen erklÃ¤rt</span>
        </li>
        <li class="flex items-start gap-2">
          <span class="text-green-600 mt-1">â†’</span>
          <span>JAMstack vs. WordPress: Der technische Vergleich</span>
        </li>
        <li class="flex items-start gap-2">
          <span class="text-green-600 mt-1">â†’</span>
          <span>#1 Rankings Case Study: Was hat funktioniert</span>
        </li>
      </ul>
    </div>
  </div>

  <!-- Chat Widget -->
  <ChatWidget />
</section>

<script>
  // Open ChatWidget when "Chat starten" button is clicked
  const chatButton = document.getElementById("open-briefing-chat");
  
  chatButton?.addEventListener("click", () => {
    // Click the ChatWidget button to open it
    const widgetButton = document.getElementById("chat-button") as HTMLButtonElement;
    if (widgetButton) {
      widgetButton.click();
    } else {
      console.warn("ChatWidget button not found yet. Waiting...");
      // Wait a moment and try again
      setTimeout(() => {
        const retryButton = document.getElementById("chat-button") as HTMLButtonElement;
        if (retryButton) retryButton.click();
      }, 100);
    }
  });
</script>
